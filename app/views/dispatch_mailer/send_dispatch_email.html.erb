<html>
  <head>
    <meta content='text/html; charset=UTF-8' http-equiv='Content-Type' />
  </head>
  <body>
    <table style="border: 1px solid black; border-collapse: collapse; width: 100%;">
      <tr style="background-color: lightgrey;">
        <th style="border: 1px solid black; padding: 10px;">Dispatch #</th>
        <th style="border: 1px solid black; padding: 10px;">Product</th>
        <th style="border: 1px solid black; padding: 10px;">Quantity(Gals)</th>
        <th style="border: 1px solid black; padding: 10px;">Origin</th>
        <th style="border: 1px solid black; padding: 10px;">Destination</th>
      </tr>
      <tr>
        <td style="border: 1px solid black; padding: 10px;"><%= @dispatch.id %></td>
        <td style="border: 1px solid black; padding: 10px;"><%= @dispatch.customer_orders.first.product %></td>
        <td style="border: 1px solid black; padding: 10px;"><%= @dispatch.customer_orders.first.approximate_product_amount %></td>
        <td style="border: 1px solid black; padding: 10px;">
          <% origin_location = @origin_locations.find_by(city: @dispatch.origin) %>
          <% if origin_location %>
            <%= "#{origin_location.address}, #{origin_location.city}, #{origin_location.state} #{origin_location.zip}" %>
          <% else %>
            No matching location found
          <% end %>
        </td>
        <td style="border: 1px solid black; padding: 10px;"><%= @destination_locations.find_by(city: @dispatch.destination).address %></td>
      </tr>
    </table>
  </body>
</html>